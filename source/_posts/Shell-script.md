---
title: Shell script
date: 2017-01-31 23:36:16
tags:
  - Linux
  - Shell script
categories: Linux
---

> Shell脚本（英语：Shell script），又稱Shell命令稿、程式化腳本，是一種電腦程式與文字檔案，內容由一連串的shell命令組成，經由Unix Shell直譯其內容後運作。
<!-- more -->


## 环境变量与用户自定义变量的区别
- 用户自定义变量只在当前的 Shell 中生效
- 环境变量在当前 Shell 和这个 Shell 的所有子 Shell 中生效

## 常用环境变量
| 环境变量 | 存放内容 |
|---------|--------------------------|
| HOSTNAME | 主机名 |
| SHELL | 当前的 shell |
| TERM | 终端环境 |
| HISTSIZE | 历史命令条数 |
| SSH_CLIENT | 当前操作环境是用 ssh 连接的，这里记录客户端 IP |
| SSH_TTY | ssh 连接的终端是 pts/1 |
| USER | 当前登录的用户 |
| PS1 | 命令提示符设置 |

## Shell 预定义变量
| 预定义变量 | 作用 |
|--------|--------------------------------|
| $? | 最后一次执行的命令的返回状态。返回 0（正确执行）或非 0（执行不正确） |
| $$ | 当前进程的进程号（PID） |
| $! | 后台运行的最后一个进程的进程号（PID） |


## read
> 格式：read [选项] [变量名]
### 常用选项
| 选项范例 | 解释 |
|------|------------------------------|
| -p "提示信息" | 输出提示信息 |
| -t 秒数 | 指定等待时间 |
| -n 字符数 | 只接受指定的字符数就会执行 |
| -s | 隐藏输入的数据，适用于机密信息的输入 |

## declare
> 格式：declare [+/-][选项] 变量名
### 常用选项
| 选项 | 功能 |
|-----|--------------------------|
| - | 给变量设定类型属性 |
| + | 取消变量的类型属性 |
| -a | 将变量声明为数组型 |
| -i | 将变量声明为整数型（integer） |
| -x | 将变量声明为环境变量 |
| -r | 将变量声明为只读变量 |
| -p | 显示指定变量被声明的类型 |

## 杂项
- 反引号和`$()`作用一样，推荐使用`$()`，因为反引号容易看错