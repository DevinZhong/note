---
title: Shell逻辑表达式
date: 2017-02-04 15:31:57
tags:
  - Linux
  - Shell script
categories: Linux
---

> 逻辑表达式是条件判断的基础，这个东西必须搞定
<!-- more -->

## Shell test、单中括号 []、双中括号[[]] 的区别
- &、||、< 和 > 操作符能在 [[]] 中使用
- -a、-o 无法在 [[]] 中使用
- [[]] 支持字符串的模式匹配，使用 =~ 操作符时甚至支持shell的正则表达式
- [[]] 中匹配字符串或通配符，不需要引号

```bash
# 查看他们的类别
type [ [[ test
# [ is a shell builtin
# [[ is a shell keyword
# test is a shell builtin

# [] 既然是命令，它就和参数组合为一体被 shell 解释
# 那样比如 ">" "<" 就被 shell 解释为重定向符号了
[ 2 < 1 ] && echo True || echo False   # True（若1存在）
[[ 2 < 1 ]] && echo True || echo False # False
```

## test命令
### 文件类型检测（存在与否及文件类型）
选项 | 功能
---------------|-----------------------------------------------
-e | 该文件是否存在
-d | 该文件是否为目录
-f | 该文件是否为普通文件
b,c,S,p,L | 分别指的是块设备、字符设备、套接字文件、管道文件及链接文件

### 文件权限的检测
选项 | 功能
----|-----------------------------------------------
-r | 该文件是否具有可读属性
-w | 该文件是否具有可写属性
-x | 该文件是否具有可执行属性
-s | 该文件是否为非空白文件，即该文件内容均为空格组成但是至少要有一个空格

### 比较两个文件
选项 | 功能
----|-----------------------------------------------
-nt | 文件file_a是否比file_b新
-ot | 文件file_a是否比file_b旧
-ef | 判断两个文件是否为同一文件，可用于判断硬连接。（主要判断两个文件是否均指向同一个inode）

### 两个整数之间的判断
选项 | 功能
----|-----------------------------------------------
-eq | 两个数相等
-ne | 两个数不相等
-gt | 前者大于后者
-lt | 前者小于后者
-ge | 前者大于等后者
-le | 前者小于等于后者

### 判断字符串
选项 | 功能
----|-----------------------------------------------
-z | 判断字符串是否为空
-n | 判断字符串是否非空（-n亦可省略）
= | 判断两字条串是否相等
!= | 判断两字条串是否不相等

### 多重判断条件
选项 | 功能
----|-----------------------------------------------
-a | 当两个条件都满足时才回传true
-o | 当两个条件满足其一时即回传true
-! | 条件求反